From 015d01bfd37e6197bcc1008f36bdbfe16256f3c1 Mon Sep 17 00:00:00 2001
From: Martin Stransky <stransky@redhat.com>
Date: Tue, 21 Mar 2017 13:21:44 +0900
Subject: [PATCH 08/44] Fixed flickering when wl_buffer is altered

Signed-off-by: Hiroshi Hatake <hatake@clear-code.com>
---
 widget/gtk/WindowSurfaceWayland.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/widget/gtk/WindowSurfaceWayland.cpp b/widget/gtk/WindowSurfaceWayland.cpp
index 1cabc71c1ab3..e143f5590c50 100644
--- a/widget/gtk/WindowSurfaceWayland.cpp
+++ b/widget/gtk/WindowSurfaceWayland.cpp
@@ -464,6 +464,9 @@ WindowSurfaceWayland::GetBufferToDraw(int aWidth, int aHeight)
       mBackBuffer = tmp;
 
       mFrontBuffer->Sync(mBackBuffer);
+
+      // TODO (https://bugzilla.redhat.com/show_bug.cgi?id=1418260)
+      wl_surface_damage(mSurface, 0, 0, aWidth, aHeight);
     }
 
     if (!mFrontBuffer->MatchSize(aWidth, aHeight)) {
-- 
2.11.0

