From 032546a395eb7cfbc297fc4d3706e2dfd4f77603 Mon Sep 17 00:00:00 2001
From: Takuro Ashie <ashie@homa.ne.jp>
Date: Mon, 25 Apr 2016 17:44:47 +0900
Subject: [PATCH 42/44] Fix a build error on enabling both Gtk+2 and EGL

Signed-off-by: Takuro Ashie <ashie@homa.ne.jp>
Signed-off-by: Hiroshi Hatake <hatake@clear-code.com>
---
 xpcom/base/nsSystemInfo.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/xpcom/base/nsSystemInfo.cpp b/xpcom/base/nsSystemInfo.cpp
index 2ef95047d2a4..86750b5743b0 100644
--- a/xpcom/base/nsSystemInfo.cpp
+++ b/xpcom/base/nsSystemInfo.cpp
@@ -692,7 +692,8 @@ nsSystemInfo::Init()
   char gtkver[64];
   ssize_t gtkver_len = 0;
 
-#if MOZ_WIDGET_GTK == 2
+#if (MOZ_WIDGET_GTK == 2) && defined(USE_GLX_TEST)
+  // it's defined in toolkit/xre/glxtest.cpp
   extern int gtk_read_end_of_the_pipe;
 
   if (gtk_read_end_of_the_pipe != -1) {
-- 
2.11.0

