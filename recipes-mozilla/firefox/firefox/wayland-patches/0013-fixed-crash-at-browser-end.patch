From 430f285477b68eb2bf3d155c219c376a96492ab3 Mon Sep 17 00:00:00 2001
From: Martin Stransky <stransky@redhat.com>
Date: Fri, 24 Mar 2017 23:34:26 +0100
Subject: [PATCH 13/44] fixed crash at browser end

Signed-off-by: Hiroshi Hatake <hatake@clear-code.com>
---
 gfx/thebes/gfxPlatformGtk.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/gfx/thebes/gfxPlatformGtk.cpp b/gfx/thebes/gfxPlatformGtk.cpp
index 20fbd3df7d21..8821921e8824 100644
--- a/gfx/thebes/gfxPlatformGtk.cpp
+++ b/gfx/thebes/gfxPlatformGtk.cpp
@@ -110,6 +110,9 @@ gfxPlatformGtk::gfxPlatformGtk()
                      contentMask, BackendType::CAIRO);
 
 #if defined(MOZ_X11)
+    mXCompositorDisplay = nullptr;
+    mWaylandCompositorDisplay = nullptr;
+
     GdkDisplay *gdkDisplay = gdk_display_get_default();
     mIsX11Display = GDK_IS_X11_DISPLAY(gdkDisplay);
     if (mIsX11Display) {
-- 
2.11.0

